import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { ArrowLeft, UserPlus, CreditCard, X, Plus, Minus, Sparkles, Search, ScanFace, Star } from 'lucide-react';
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import AlinChatBox from "@/components/AlinChatBox";
import { NewClientDialog } from "@/components/NewClientDialog";
import { AdvancedPurchaseOverlay } from "@/components/AdvancedPurchaseOverlay";
import { ProductImageProcessor } from "@/components/ProductImageProcessor";
import TanningProductCarousel from "@/components/TanningProductCarousel";
const TanningBeds = () => {
  const navigate = useNavigate();
  const [customTanSessions, setCustomTanSessions] = useState(4);
  const [showPricingOverlay, setShowPricingOverlay] = useState(false);
  const [showNewClientDialog, setShowNewClientDialog] = useState(false);
  const [showProductProcessor, setShowProductProcessor] = useState(false);
  const [showProductCarousel, setShowProductCarousel] = useState(false);
  const [searchQuery, setSearchQuery] = useState("");
  const [showFaceRecognitionDialog, setShowFaceRecognitionDialog] = useState(false);
  const tanningOptions = [{
    icon: UserPlus,
    title: "×œ×§×•×— ×—×“×© - ×”×¨×©××”",
    onClick: () => {
      setShowNewClientDialog(true);
    }
  }, {
    icon: Search,
    title: "×—×™×¤×•×© ××©×ª×–×£ ×§×™×™×",
    onClick: () => {
      console.log("Open existing customer search");
    }
  }, {
    icon: ScanFace,
    title: "×”×¨×©××” ×œ×©×™×¨×•×ª×™ 24/7",
    onClick: () => {
      setShowFaceRecognitionDialog(true);
    }
  }, {
    icon: () => <div className="flex flex-col items-center justify-center space-y-2 w-full h-full">
          <CreditCard className="w-8 h-8 text-primary group-hover:text-white transition-all duration-300" />
          <div className="text-center">
            
            
          </div>
        </div>,
    title: "×¨×›×™×©×ª ×‘×¨×•× ×–×¨×™×",
    onClick: () => {
      setShowPricingOverlay(true);
    }
  }, {
    icon: CreditCard,
    title: "×¨×›×™×©×ª ×›×¨×˜×™×¡×™×”",
    onClick: () => {
      setShowPricingOverlay(true);
    }
  }, {
    icon: Sparkles,
    title: "AI TAN",
    onClick: () => {
      console.log("Navigate to AI TAN");
    }
  }, {
    icon: () => <></>,
    title: "",
    subtitle: "",
    onClick: () => {
      setShowProductCarousel(true);
    }
  }];
  return <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
      {/* Purple Neon Overlay Background */}
      <div className="absolute inset-0">
        {/* Purple background */}
        <div className="absolute inset-0 bg-purple-500/50 backdrop-blur-sm" />
        {/* Gradient overlay */}
        <div className="absolute inset-0 bg-gradient-to-br from-gray-900 via-black to-gray-800 opacity-70" />
      </div>
      
      {/* Back to Self Service Button - moved to top corner */}
      <div className="absolute top-6 right-6 z-30">
        <Button onClick={() => navigate('/')} variant="outline" size="lg" className="bg-white/10 border-white/20 text-white hover:bg-white/20 backdrop-blur-sm">
          <ArrowLeft className="w-5 h-5 ml-2" />
          ×—×–×¨×” ×œ×©×™×¨×•×ª ×¢×¦××™
        </Button>
      </div>
      {/* Welcome Header - ××™×§×•× ×××•×–×Ÿ ×‘××¨×›×– ×”×¢×œ×™×•×Ÿ */}
      <div className="absolute top-16 left-0 right-0 z-20">
        <div className="text-center space-y-4 px-4">
          <div className="flex items-center justify-center mb-1">
            <h1 className="text-xl font-bold text-white font-varela tracking-wide" style={{
            fontFamily: "'Varela Round', sans-serif !important"
          }}>
              ×‘×¨×•×›×™× ×”×‘××™× ×œ×¢×•×œ× ×”××—×¨ ×©×œ ×ª×¢×©×™×™×ª ×”×©×™×–×•×£
            </h1>
          </div>
          
          {/* Pink Neon Separator */}
          <div className="relative py-1 flex justify-center">
            <div className="w-1/2 h-px bg-gradient-to-r from-transparent via-pink-500 to-transparent animate-pulse" style={{
            filter: 'drop-shadow(0 0 16px rgba(255, 20, 147, 1)) drop-shadow(0 0 32px rgba(236, 72, 153, 1)) drop-shadow(0 0 48px rgba(236, 72, 153, 0.8)) drop-shadow(0 0 64px rgba(255, 20, 147, 0.6))',
            boxShadow: '0 0 35px rgba(255, 20, 147, 1), 0 0 60px rgba(236, 72, 153, 0.8), 0 0 80px rgba(255, 20, 147, 0.6), inset 0 0 20px rgba(255, 20, 147, 0.5)'
          }}></div>
            <div className="absolute inset-0 flex justify-center">
              <div className="w-1/2 h-px bg-gradient-to-r from-transparent via-pink-300 to-transparent opacity-80 blur-sm animate-pulse"></div>
            </div>
          </div>
          
          {/* About Us Section - ×˜×§×¡×˜ ××œ× */}
          <div className="px-2 mx-[9px]">
            <p className="text-sm font-semibold text-white mb-3 text-center font-varela">×’××™× ×œ×”×•×‘×™×œ ××ª ×”××•×“×œ ×”×”×™×™×‘×¨×™×“×™ ×©×œ ×¢×•×œ× ×”×©×™×–×•×£</p>
            <div className="text-gray-300 space-y-1 text-sm" dir="rtl">
              <p>â€¢ ×œ×œ× ×¦×•×¨×š ×‘×ª×™××•× ××¨××© ××• ×§×‘×™×¢×ª ×ª×•×¨×™×</p>
              <p>â€¢ ×›× ×™×¡×” ×¢×¦×××™×ª ×‘×›×œ ×©×¢×” ×©×œ ×”×™×•× ×•×‘×›×œ ×©×¢×” ×©×œ ×”×œ×™×œ×”</p>
              <p>â€¢ ××™×˜×•×ª ×”×©×™×–×•×£ ×–××™× ×•×ª 24/7 ×œ×œ×§×•×—×•×ª ×”×‘×•×˜×™×§</p>
              <p>â€¢ ×”×›× ×™×¡×” ×œ××ª×—× ×”×©×™×–×•×£ ×œ××—×¨ ×©×¢×•×ª ×”×¤×¢×™×œ×•×ª ×›×¨×•×š ×‘×”×¨×©××” ×œ××¢×¨×›×ª ×–×™×”×•×™ ×¤× ×™× ××ª×§×“××ª</p>
              <p>â€¢ ×¦×•×•×ª ××§×¦×•×¢×™ ×•×× ×•×¡×” ×©×™×¢× ×™×§ ×œ×›× ×©×™×¨×•×ª ×‘×¨××” ×”×’×‘×•×”×” ×‘×™×•×ª×¨</p>
              <p>â€¢ ×©×¢×•×ª ×¤×¢×™×œ×•×ª: 10:00-19:00, ×™××™ ×©×™×©×™ 10:00-14:00, ×™××™ ×©×‘×ª ×¡×’×•×¨</p>
              <p className="text-xs text-gray-400 mr-2">* ×‘×©×™×¨×•×ª ×¢×¦××™ ×œ××—×¨ ×©×¢×•×ª ×”×¤×¢×™×œ×•×ª</p>
              <p>â€¢ ×©×™×¨×•×ª ×œ×§×•×—×•×ª ×–××™×Ÿ 24/7 â€¢ ×¡×‘×™×‘×” × ×§×™×”, ×‘×˜×•×—×” ×•××§×¦×•×¢×™×ª</p>
            </div>
          </div>
        </div>
      </div>

      {/* Content Container - positioned lower to avoid overlap */}
      <div className="relative w-full max-w-4xl flex items-center justify-center" style={{
      marginTop: '320px'
    }}>
        {/* Close Button - back to self service */}
        <Button onClick={() => navigate('/')} variant="ghost" size="icon" className="absolute top-4 left-4 text-white hover:bg-white/20 z-10">
          <X className="w-6 h-6" />
        </Button>

        {/* Service Fields with Larger Design */}
        <div className="w-full max-w-full mx-auto px-6">
          <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6 animate-scale-in">
          
          {tanningOptions.map((option, index) => <div key={index} className="group cursor-pointer transform-gpu transition-all duration-300 hover:animate-magnetic-hover" onClick={option.onClick} onMouseEnter={e => {
            if (window.innerWidth >= 768) {
              e.currentTarget.style.transform = 'translateY(-4px) scale(1.05)';
              e.currentTarget.style.filter = 'brightness(1.2) saturate(1.3)';
            }
          }} onMouseLeave={e => {
            if (window.innerWidth >= 768) {
              e.currentTarget.style.transform = 'translateY(0) scale(1)';
              e.currentTarget.style.filter = 'brightness(1) saturate(1)';
            }
          }} style={{
            '--icon-color': 'hsl(var(--primary))',
            '--icon-hover-color': 'white',
            transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',
            minWidth: '180px'
          } as any}>
              <div className="w-full aspect-square p-10 rounded-xl border-2 flex flex-col items-center justify-center transition-all duration-300 backdrop-blur-sm hover:scale-105 overflow-hidden relative bg-gradient-to-br from-background via-background/95 to-primary/5 border-primary/50 shadow-2xl" style={{
              boxShadow: '0 4px 12px rgba(0, 0, 0, 0.3)',
              backdropFilter: 'blur(8px)',
              transform: 'translateZ(0)',
              filter: 'drop-shadow(0 0 20px hsl(var(--primary) / 0.4))'
            }}>
                
                {/* Enhanced inner glow effect */}
                <div className="absolute inset-0 rounded-xl bg-gradient-to-br from-white/2 via-primary/2 to-white/2 opacity-0 group-hover:opacity-100 transition-all duration-300"></div>
                
                {/* Icon Container */}
                <div className="relative z-10 transform transition-all duration-300 group-hover:scale-105 flex-1 flex items-center justify-center">
                  <span style={{
                  filter: 'drop-shadow(0 0 20px hsl(var(--primary) / 1)) drop-shadow(0 0 40px hsl(var(--primary) / 0.5))'
                }} className="transition-all duration-300 w-full">
                     {typeof option.icon === 'function' ? <option.icon /> : React.createElement(option.icon, {
                    className: "w-12 h-12 text-primary group-hover:text-white transition-all duration-300",
                    strokeWidth: 1.5
                  })}
                  </span>
                </div>
                
                {/* Icon Label - only show if title exists */}
                {option.title && <div className="text-center mt-3 px-2">
                    <span className="text-white text-sm font-hebrew font-medium opacity-90 group-hover:opacity-100 transition-all duration-300 block leading-tight whitespace-nowrap overflow-hidden text-ellipsis group-hover:drop-shadow-[0_0_8px_rgba(34,211,238,0.8)]">
                      {option.title}
                    </span>
                  </div>}
              </div>
            </div>)}
          </div>
        </div>
      </div>

      {/* Safety reminder - subtle and non-intrusive */}
      <div className="fixed bottom-4 left-4 z-20 max-w-xs">
        <div className="bg-gray-900/80 backdrop-blur-sm border border-cyan-400/20 rounded-lg p-3 text-xs">
          <p className="text-cyan-200 font-hebrew text-right mb-1">ğŸ’¡ ×–×›×¨×•:</p>
          <p className="text-gray-300 font-hebrew text-right leading-relaxed">
            ×©×™×–×•×£ ×‘×˜×•×— ××ª×—×™×œ ×‘×–×™×”×•×™ ×¡×•×’ ×”×¢×•×¨ ×•×× ×•×—×” ×©×œ 48 ×©×¢×•×ª ×‘×™×Ÿ ×¡×©× ×™×
          </p>
        </div>
      </div>

      {/* Alin Chat Box */}
      <div className="fixed top-80 right-6 z-30">
        <AlinChatBox isSelfServicePage={true} contextMessage="×”×™×™ ×× ×™ ××œ×™×Ÿ, ×¤×” ××™×ª×›× ×‘××™×˜×•×ª ×”×©×™×–×•×£, ×× ×™ ××œ×•×•×” ××ª×›× ×‘×›×œ ×ª×”×œ×™×š ×”×”×¨×©××” 24/7" />
      </div>

      {/* New Client Dialog */}
      <NewClientDialog open={showNewClientDialog} onOpenChange={setShowNewClientDialog} />

      {/* Advanced Purchase Overlay */}
      {showPricingOverlay && <AdvancedPurchaseOverlay open={showPricingOverlay} onClose={() => setShowPricingOverlay(false)} />}

      {/* Product Carousel */}
      {showProductCarousel && <div className="fixed inset-0 z-50 bg-black/95 backdrop-blur-sm flex items-center justify-center p-4 overflow-auto">
          <div className="relative w-full max-w-5xl max-h-[80vh]">
            <Button onClick={() => setShowProductCarousel(false)} variant="outline" size="lg" className="absolute top-4 right-4 z-10 bg-white/10 border-white/20 text-white hover:bg-white/20">
              <X className="w-6 h-6 ml-2" />
              ×¡×’×•×¨
            </Button>
            <div className="h-full overflow-y-auto">
              <TanningProductCarousel onAddToCart={productId => {
            console.log("Added to cart:", productId);
            // Add your cart logic here
          }} />
            </div>
          </div>
        </div>}

      {/* Face Recognition Registration Dialog */}
      {showFaceRecognitionDialog && <div className="fixed inset-0 z-50 bg-black/95 backdrop-blur-sm flex items-center justify-center p-4">
          <div className="relative bg-gradient-to-br from-gray-900/95 via-black/90 to-gray-800/95 rounded-xl border border-primary/30 p-8 max-w-md w-full">
            <Button onClick={() => setShowFaceRecognitionDialog(false)} variant="ghost" size="icon" className="absolute top-4 right-4 text-white hover:bg-white/10">
              <X className="w-6 h-6" />
            </Button>
            
            <div className="text-center space-y-6">
              <div className="w-20 h-20 mx-auto bg-primary/20 rounded-full flex items-center justify-center">
                <ScanFace className="w-10 h-10 text-primary" />
              </div>
              
              <div>
                <h3 className="text-xl font-bold text-white mb-2">×”×¨×©××” ×œ×©×™×¨×•×ª×™ 24/7</h3>
                <p className="text-gray-300 text-sm">
                  ×”×¨×©××” ×œ××¢×¨×›×ª ×–×™×”×•×™ ×¤× ×™× ×œ×›× ×™×¡×” ×¢×¦×××™×ª ×œ××—×¨ ×©×¢×•×ª ×”×¤×¢×™×œ×•×ª
                </p>
              </div>
              
              <div className="space-y-4">
                <Input placeholder="×©× ××œ×" className="bg-black/50 border-primary/30 text-white" />
                <Input placeholder="××¡×¤×¨ ×˜×œ×¤×•×Ÿ" className="bg-black/50 border-primary/30 text-white" />
                <Input placeholder="×›×ª×•×‘×ª ××™××™×™×œ" className="bg-black/50 border-primary/30 text-white" />
              </div>
              
              <Button className="w-full bg-primary hover:bg-primary/90 text-white font-bold">
                ×”×ª×—×œ ×”×¨×©××”
              </Button>
              
              <p className="text-xs text-gray-400 text-center">
                ×”×”×¨×©××” ×›×•×œ×œ×ª ×¦×™×œ×•× ×ª××•× ×” ×•××™××•×ª ×–×”×•×ª
              </p>
            </div>
          </div>
        </div>}

      {/* Product Image Processor */}
      {showProductProcessor && <div className="fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4">
          <div className="relative bg-white dark:bg-gray-900 rounded-lg max-w-full max-h-full overflow-auto">
            <Button onClick={() => setShowProductProcessor(false)} variant="ghost" size="icon" className="absolute top-4 right-4 z-10">
              <X className="w-6 h-6" />
            </Button>
            <ProductImageProcessor onImagesProcessed={images => {
          console.log("Processed images:", images);
          setShowProductProcessor(false);
        }} />
          </div>
        </div>}
    </div>;
};
export default TanningBeds;